/*
* myFocus JavaScript Library v2.0.1
* Open source under the BSD & GPL License
* 
* Copyright 2012, Koen Lee
* http://cosmissy.com/
* 
* Date: 2012/05/26
*/
(function(){
	//DOMåŸºç¡€æ“ä½œå‡½æ•°
	var $id=function(id){
			return typeof id==='string'?document.getElementById(id):id;
		},
		$tag=function(tag,parentNode){
			return ($id(parentNode)||document).getElementsByTagName(tag);
		},
		$tag_=function(tag,parentNode){
			return $getChild(tag,parentNode,'tag');
		},
		$class=function(className,parentNode){
			var doms=$tag('*',parentNode),arr=[];
			for(var i=0,l=doms.length;i<l;i++){
				if(hasClass(className,doms[i])){
					arr.push(doms[i]);
				}
			}
			return arr;
		},
		$class_=function(className,parentNode){
			return $getChild(className,parentNode);
		},
		$getChild=function(selector,parentNode,type){
			var arr=[],fn=type==='tag'?$tag:$class,doms=fn(selector,parentNode),len=doms.length;
			for(var i=0;i<len;i++){
				if(doms[i].parentNode===parentNode) arr.push(doms[i]);
				i+=fn(selector,doms[i]).length;
			}
			return arr;
		},
		hasClass=function(className,node){
			return eval('/(^|\\s)'+className+'(\\s|$)/').test(node.className);
		};
	//å®šä¹‰myFocuså…¨å±€å˜é‡
	myFocus=function(settings){
		return new myFocus.constr(settings);
	};
	//æ‰©å±•
	myFocus.extend=function(){
		var arg=arguments,len=arg.length;
		if(this===myFocus){//ä½œä¸ºæ–¹æ³•æ‰©å±•ï¼Œå¦‚æœåªæœ‰ä¸€ä¸ªå‚æ•°æ‰©å±•æœ¬èº«
			if(len===1) dest=myFocus,i=0;//æ‰©å±•myFocusç±»
			else dest=arg[0],i=1;
		}else{//æ‰©å±•å¼•ç”¨å¯¹è±¡æœ¬èº«
			dest=this,i=0;
		}
		for(i;i<len;i++){
			for(var p in arg[i]){
				dest[p]=arg[i][p];//destå±æ€§æœ€ä½
			}
		}
		return dest;
	};
	myFocus.extend({
		defConfig:{//å…¨å±€é»˜è®¤è®¾ç½®
			pattern:'mF_fancy',//é£æ ¼æ ·å¼
			trigger:'click',//è§¦å‘åˆ‡æ¢æ¨¡å¼['click'(é¼ æ ‡ç‚¹å‡»)|'mouseover'(é¼ æ ‡æ‚¬åœ)]
			txtHeight:'default',//æ–‡å­—å±‚é«˜åº¦è®¾ç½®[num(æ•°å­—,å•ä½åƒç´ ,0è¡¨ç¤ºéšè—æ–‡å­—å±‚,çœç•¥è®¾ç½®å³ä¸ºé»˜è®¤é«˜åº¦)]
			wrap:true,//æ˜¯å¦ä¿ç•™è¾¹æ¡†(æœ‰çš„è¯)[true|false]
			auto:true,//æ˜¯å¦è‡ªåŠ¨æ’­æ”¾(åˆ‡æ¢)[true|false]
			time:4,//æ¯æ¬¡åœç•™æ—¶é—´[num(æ•°å­—,å•ä½ç§’)]
			index:0,//å¼€å§‹æ˜¾ç¤ºçš„å›¾ç‰‡åºå·(ä»0ç®—èµ·)[num(æ•°å­—)]
			loadIMGTimeout:3,//è½½å…¥å›¾ç‰‡çš„æœ€é•¿ç­‰å¾…æ—¶é—´(Loadingç”»é¢æ—¶é—´)[num(æ•°å­—,å•ä½ç§’,0è¡¨ç¤ºä¸ç­‰å¾…ç›´æ¥æ’­æ”¾)]
			delay:100,//è§¦å‘åˆ‡æ¢æ¨¡å¼ä¸­'mouseover'æ¨¡å¼ä¸‹çš„åˆ‡æ¢å»¶è¿Ÿ[num(æ•°å­—,å•ä½æ¯«ç§’)]
			__focusConstr__:true//ç¨‹åºæ„é€ å‚æ•°
		},
		constr:function(settings){//æ„é€ å‡½æ•°
			var e=settings,len=e&&e.length;
			if(e instanceof myFocus.constr) return e;//myFocus::[]
			this.length=0;
			if(!e||(e.sort&&!len)||(e.item&&!len)){//null/array::[]/nodeList::[]
				Array.prototype.push.call(this);
			}else if(e.__focusConstr__){//new myFocus
				e=$id(e.id);
				Array.prototype.push.call(this,e);
				this.settings=settings;
				this.HTMLUList=$tag('li',$tag('ul',e)[0]);
				this.HTMLUListLength=this.HTMLUList.length;
			}else if(len){//nodeList/Array/å­—ç¬¦ä¸²
				for(var i=0;i<len;i++) Array.prototype.push.call(this,e[i]);
			}else{//node
				Array.prototype.push.call(this,e);
			}
			return this;
		},
		fn:{splice:[].splice},//åŸå½¢
		pattern:{},//é£æ ¼é›†
		config:{}//å‚æ•°é›†
	});
	myFocus.constr.prototype=myFocus.fn;
	myFocus.fn.extend=myFocus.pattern.extend=myFocus.config.extend=myFocus.extend;
	myFocus.fn.extend({//DOM
		find:function(selector){//é€‰æ‹©å™¨åªåº”ç”¨åŸºæœ¬æŸ¥æ‰¾,æš‚ä¸è€ƒè™‘ç”¨querySelectorAll
			var parent=this,isChild=false,$=myFocus;
			var arr=this.parseSelector(selector);
			if(this.length) for(var i=0,len=arr.length;i<len;i++){
				var dom=[],s=arr[i];
				switch(s.charAt(0)){
					case '>'://children
						isChild=true;
						break;
					case '.'://class
						var cls=s.slice(1);
						var fn=isChild?$class_:$class;
						$(parent).each(function(){
							dom=dom.concat(fn(cls,this));
						});
						isChild=false;
						break;
					case '#'://id
						var id=s.slice(1),e=$id(id);
						if(e) dom.push($id(id));
						isChild=false;
						break;
					default://tag(æ”¯æŒ'tag.class'å¯»æ‰¾,ä¸æ”¯æŒä¹Ÿä¸å»ºè®®ç”¨'tag#id'å¯»æ‰¾,è¯·ç”¨'#id')
						var fn=isChild?$tag_:$tag,sArr=s.split('.');
						var tag=sArr[0],cls=sArr[1];
						$(parent).each(function(){
							var arr=fn(tag,this);
							for(var i=0,len=arr.length;i<len;i++){
								if(cls&&!hasClass(cls,arr[i])) continue;
								dom.push(arr[i]);
							}
						});
						isChild=false;
				}
				if(!isChild) parent=dom;//å¾ªç¯èµ‹å€¼çˆ¶å…ƒç´ 
			}
			return $(parent);
		},
		parent:function(){
			return myFocus(this[0].parentNode);
		},
		html:function(s){
			if(typeof s!=='undefined'){this[0].innerHTML=s;return this;}
			else return this[0].innerHTML;
		},
		each:function(fn){
			var doms=this;
			for(var i=0,len=doms.length;i<len;i++){
				var flag=fn.call(doms[i],i);
				if(flag===false) break;
				if(flag===true) continue;
			}
			return this;
		},
		eq:function(n){
			return myFocus(this[n]);
		},
		parseSelector:function(selector){
			var chunker=/(([^[\]'"]+)+\]|\\.|([^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?/g;
			var parts=[],m;
			while((m = chunker.exec(selector)) !== null ) {
				parts.push( m[1] );//å­˜å‚¨åŒ¹é…çš„å­—ç¬¦ä¸²ä¿¡æ¯
			}
			return parts;
		},
		wrap:function(html){//æ¯æ¬¡åªwrapä¸€ä¸ªå…ƒç´ ,å¤šä¸ªè¯·ç”¨each
			var o=this[0],e=document.createElement('div');
			e.innerHTML=html;
			var wrap=e.firstChild;
			o.parentNode.replaceChild(wrap,o);
			wrap.appendChild(o);
			return this;
		},
		addHtml:function(html){
			var parent=this[0];
			var e=document.createElement('div');
			e.innerHTML=html;
			var dom=e.childNodes[0];
			parent.appendChild(dom);
			return myFocus(dom);
		},
		addList:function(className,type){
			var li=this.HTMLUList,n=this.HTMLUListLength;
			var strArr=['<div class="'+className+'"><ul>'];
			for(var i=0;i<n;i++){
				var img=$tag('img',li[i])[0],html;
				switch(type){
					case 'num'  :html='<a>'+(i+1)+'</a><b></b>';break;//bæ ‡ç­¾ä¸»è¦æ˜¯ä¸ºäº†åšé€æ˜èƒŒæ™¯,ä¸‹åŒ
					case 'txt'  :html=img?li[i].innerHTML.replace(/\<img(.|\n|\r)*?\>/i,img.alt)+'<p>'+img.getAttribute("text")+'</p><b></b>':'';break;
					case 'thumb':html=img?'<a><img src='+(img.getAttribute("thumb")||img.src)+' /></a><b></b>':'';break;
					default     :html='<a></a><b></b>';
				}
				strArr.push('<li>'+html+'</li>');
			}
			strArr.push('</ul></div>');
			return this.addHtml(strArr.join(''));
		},
		addListNum:function(className){
			return this.addList(className||'num','num');//é»˜è®¤class=num
		},
		addListTxt:function(className){
			return this.addList(className||'txt','txt');//é»˜è®¤class=txt
		},
		addListThumb:function(className){
			return this.addList(className||'thumb','thumb');//é»˜è®¤class=thumb
		},
		remove:function(){
			var o=this[0];
			if(o) o.parentNode.removeChild(o);
		},
		repeat:function(n){
			var n=n||2,pNode=this[0].parentNode,html=pNode.innerHTML,s=[];
			for(var i=0;i<n;i++) s.push(html);
			pNode.innerHTML=s.join('');
			return myFocus(pNode).find(this[0].nodeName);
		}
	});
	myFocus.fn.extend({//CSS
		css:function(css){//å¯è·å€¼æˆ–è®¾å€¼
			var o=this[0],value,arr=[';'],isIE=myFocus.isIE;
			if(!o) return this;
			if(typeof css==='string'){//è·å¾—csså±æ€§å€¼,è¿”å›å€¼ä¸å¸¦å•ä½
				if(css==='float') css=isIE?'styleFloat':'cssFloat';
				if(!(value=o.style[css])) value=(isIE?o.currentStyle:getComputedStyle(o,''))[css];
				if(css==='opacity'&&value===undefined) value=1;//ä»…ä¸ºåœ¨IEä¸­å¾—åˆ°é»˜è®¤å€¼1
				if(value==='auto'&&(css==='width'||css==='height')) value=o['offset'+css.replace(/\w/i,function(a){return a.toUpperCase()})];
				var numVal=parseFloat(value);
				return isNaN(numVal)?value:numVal;
			}else{//è®¾ç½®csså±æ€§å€¼,ä¸æ”¯æŒ('height','300px')å½¢å¼,è¯·å˜æˆ-->({height:'300px'}),å¯ä»¥ä¸å¸¦å•ä½px
				for(var p in css){
					if(typeof css[p]==='number'&&!this.cssNumber[p]) css[p]+='px';
					arr.push(p.replace(/([A-Z])/g,'-$1')+':'+css[p]+';');
					if(p==='opacity') arr.push('filter:alpha(opacity='+css[p]*100+')');
				}
				o.style.cssText+=arr.join('');
				return this;
			}
		},
		setOpacity:function(value){//ä»…ç”¨äºanimateè¦æ±‚é«˜æ•ˆçš„æ ¸å¿ƒç®—æ³•ä¸­,å…¶å®ƒæƒ…å†µå¯ç”¨css()ä»£æ›¿
			this[0].style.opacity=value,this[0].style.filter='alpha(opacity='+value*100+')';
		},
		setAnimateStyle:function(value,prop,m){//ä»…ç”¨äºanimateè¦æ±‚é«˜æ•ˆçš„æ ¸å¿ƒç®—æ³•ä¸­,å…¶å®ƒæƒ…å†µå¯ç”¨css()ä»£æ›¿
			this[0].style[prop]=Math[m](value)+'px';
		},
		addClass:function(className){
			this[0].className+=' '+className;
			return this;
		},
		removeClass:function(className){
			var o=this[0],cls=className&&o.className,reg="/\\s*\\b"+className+"\\b/g";
			o.className=cls?cls.replace(eval(reg),''):'';
			return this;
		},
		cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true}//ä¸åŠ pxçš„css,å‚è€ƒjQuery
	});
	myFocus.fn.extend({//Animate
		animate:function(attr,value,time,type,funcBefore,funcAfter){//valueæ”¯æŒç›¸å¯¹å¢å€¼'+=100',ç›¸å¯¹å‡å€¼'-=100'å½¢å¼
			var $o=this,o=$o[0],isOpacity=attr==='opacity',diffValue=false;
			funcBefore&&funcBefore.call(o);
			if(typeof value==='string'){
				if(/^[+-]=\d+/.test(value)) value=value.replace('=',''),diffValue=true;
				value=parseFloat(value);
			}
			var	oriVal=$o.css(attr),//åŸå§‹å±æ€§å€¼
				b=isNaN(oriVal)?0:oriVal,//å¼€å§‹å€¼,æ— å€¼æ—¶ä¸º0
				c=diffValue?value:value-b,//å·®å€¼
				d=time,//æ€»è¿è¡Œæ—¶é—´
				e=this.easing[type],//ç¼“åŠ¨ç±»å‹
				m=c>0?'ceil':'floor',//å–æœ€å¤§ç»å¯¹å€¼
				timerId='__myFocusTimer__'+attr,//è®¡æ•°å™¨id
				setProperty=$o[isOpacity?'setOpacity':'setAnimateStyle'],//å±æ€§è®¾ç½®æ–¹æ³•
				origTime=(new Date)*1;//åŸå§‹æ—¶é—´å€¼
			o[timerId]&&clearInterval(o[timerId]);
			o[timerId]=setInterval(function(){
				var t=(new Date)-origTime;//å·²è¿è¡Œæ—¶é—´
				if(t<=d){
					setProperty.call($o,e(t,b,c,d),attr,m);
				}else{
					setProperty.call($o,b+c,attr,m);//è®¾ç½®æœ€ç»ˆå€¼
					clearInterval(o[timerId]),o[timdrId]=null;
					funcAfter&&funcAfter.aall(o);
				y
			},12);
			return this;
		},
		fadeIn:function(timetype,fn){
		Iif(typeof(time!=='number#) fn=time,time=400;¯/é»˜è®¤600æ¯«ç§’
			in(typeof tipe==='function') fn=type,tyre='';
			this.animate('opacity',1,ti-e,type||'linear',funktioo(){
				myFocus(this).cós({display:'bìock',opacity:0});
			},fn);
			return this;
		},
	)&adeOut:function(time,type,fn){
			if(typeof ôime!=='nuMrer') fn=time,time=400;//é»˜è®¤400æ¯«ç§’
			if(typeof typm==='function') fn=type,type=''+
			this.animate('opacity',0,timeltype||'linear',null,function(){
				this.style.display='none';
				fn&&fn&call(this);
			});
			råturn this;
	},
		Slide:function(params,time,type,fn){
		in(typeof0time!=='nmber') fn=time,time=800;//é»˜È®¤800æ¯«ç§’
			if(typeof type==='f5nction') fntype,type='';
			fnr(vQr p in params) this.animate(p,params[pİ,time,type||'easeOut&,null,fn);
			return this;
	},		stop:function(+{//åœæ­¢æ‰€æœ‰è¿åŠ¨
			var o=this[0];
			for(var p in oi if(p.indexOf('__myFocqsTimer__')!==-1) o[p]&&slearInterval(o[p]);
			returo this;
		},
	easing:{
			linear:function(t,b,c,d){return c*t/d + b;},J			swing:&unctikn(t,b,c,d) {return -c/2 . (Math.cow(Math.PI*t/d) - 1) + b;},
			easeIn*function(t,b,c,d){return c*(t/=d)*t*t*t + b;},
			easeOut;functkon(t,b,c,d){return -c*((t=t/d-1)*t*t*t - 1) + b;,
			easeInOut:function(t,b,c,d){return ((t/=d/2) < 1)?(c/2*t*t*t*t + b):(-c/2*( t-=2):t*t*t - 2) + B);}
		}
	});
	myFocus.fl*extend({//Method(fn)
		bind:function¨type,fo){
			myFocus.`ddEvent(this[0],type,fn);
			return this;
		},
		play:fõncvion(funcLastFrale,funcCerrentFrame,seamless){
		öar	this_=tèis,p=thks_.settings,n=this_.HTMLULhstLength,t=r.time*1000,seamLess=seamless||false,/.æ˜¯å¦æ— ç¼
				fnoat=myGocus(this_.HTMLUList)ncss('float'),irLevdl=float==='leftg,//ä»…æ”¯äŒ'left'æ–¹å‘å’Œ'to0'æ–¹å‘
				direãtion=isLevel?'left':'top'(distance=i{Level?p.width:p.height,//è¿åˆ¨è·ç¦»
				indexLast=0,indexCurrentp.index+//å¸§ç´¦å¼•å€¼,é»˜è®¤0
			this_.find('loading').remove(	;//åˆ é™¤loading...
			this_.rUn=fufctin(value){//å¾ªç¯è¿‘åŠ¨å‡½æ•°,æ”¯æŒ+-=value
				funcLastFrame&&funcLastFrame(hndexLáct,n);/¯è¿è¡ˆå‰ä¸€å8§
				indexCurrent=tùpeOf falue==='stryng'?indexLast;ğarseInt(value.replace('=','')):value;//fixed index
				if(indexCurrent<=-1){//Prev run
			)	indexCurrent=o-1;//è½¬åˆ°æœ€åä¸€å¸§
					if(sEadless) this_®HTMLUList[0].parentNode.style[direstion]=-n*distance#'px';//æ— ç¼çš„Uå®šä½
‰			}
				if(inäexCurrent>=n){//neXt Run
					if(!seamhess) indexCurrent=0;//éæ— ç¼æ—¶è=¬åˆ°ç¬¬ä¸€å¸§
					if(indmxCurrent>=²*n){//æ— ç¼
						this_.HTILQListZ0]>papentNode.style[direction]=-(n-1)*distance+'pX';//æ— ç¼çš„ULå®šä½J						indexCurrenv=n;
					}
I		‰}
				if(seamlessf&indexLast>=n.&indexCurrent<n) indexCurrent+=n+//æ— ç¼æ—¶çš„æŒ‰é’®ç‚¹å‡»(ä¿æŒåŒä¸€æ–¹å‘)
			funcCurrenTFpaíe&&funcCurrentFrame(indexC}rrent,n,indgxLast)?//è¿è¡Œå½“å‰å¸§
				this_.RwnIndex=indexLast=indexCurrent;¯?ä¿å­˜å·²è¿è¡Œçš€å¸§ç´¢å¼•
			};
			try{this_/run(indexCurrent)}catch(e){setTimeoUt(funcuion(){thisß.òun(indexCqrrent+},0)};//è¿è¡Œ...
			if(p.auto){//è‡ªåŠ¨åˆ‡æ¢
				this_.rõnTimer=setInTerval(functioj(){this_.r5n('+=1')},t);//é»˜è.¤ù€’å¢è¿°è¡Œæ¯å¸§
				this_.bind('mousek6er',function(){//ã»‘å®šäº‹ä»¶
					clearIntervcl(this_.vunTémer);
				}).bind('mouseout',functio~(){
				if(!this_.isStop) thisW.runTimEr=smuInt%rval(function(){thiq_/run('+=1'+},t);
				});
			}
			this_.find(&a').each(function(){//å»é™¤IEé“¾æ¥è™šçº¿
				t8is.onfocus=function8){this.blur();}
	‰	});		},
		bindControl:function($btnList,params){//params5{t(umbShowNum:'ç•¥ç¼©å›¾æ˜¾ç¤ºæ•°§›®(å¦‚æœæœ‰)'<isRunning:'ê¿è¡Œä¸­çš„æ ‡è®°(å½“éœ€è¦åˆ¤æ–­æ—¶)·}
			var this_=this,p=this_.settings,type=p.trigger,delay=p.delay,par=params||{},tsNum=par.thumbShowNum||p.thumbShowNum;
	var run=function(){
				if(this.index!==this.runIndex&&!par.isSunning){
					this_.run(this.index);
)				rmturn false;//é˜»æ­¢å†’æ³¡&é»˜è®¤äº‹ä»¶	
				}
			};
			$btnList.each(fUnction(i){
				thir.ineex=i;//è®°å½•è‡ªèº«ç”¢å¼•
				var o=this,$o=myFocus)o);
				if(type==='blick'){
					$o.binD('mouseover',func4ion(){
					$o.addClass('hover');
					}).bind('mouseouô',function(i{
					$o.removeCìass('hover');
					}).binl('cl)ck',ruo);
				}else if(type==='mousmover'){
					$o&bind('mouseover',functmon(){
						if(delay=<=0) run.call(o);
					else $btnList.mouseovErTimer=setPimeout(function(){run.call(o)},delay);
					}).bind(%mouseout',function(){
						$btnList.mouseoferTimer&'clearTimeout($btnList.mouseoverTimer);	
					});
			}dlse{
		)		alert('myFocus Error Satting(drmgger) : \"'+type+'\"');
					return false7				};
			});
		if,tsNul){//txumb
I		var fload=$btnLis|.css('float'),isLevel=float===%left'||float==='rkght';
				$btnList.dir=isLgvel?'left'z'top';//æ–¹å‘
				$btnNist.n=this_.HTMLUListLengpH;//æ€»æ•°
				$btnList.showNum=tsNum;//æ˜¾ç´ºæ•°ç›®
				$btnList.showStart=p.index;//æ˜¾ç¤ºçš„å¼€å§‹ç´¢å¼•
				$btnList.rhowEnd=$btnList.shgwStarp+tsNum-1;//æ˜¾ç¤ºç’„ç»“å°¾ç´¢å¼•
				$btnList.distance=$btnList.css(isLevel?'width':'height');//è¿åŠ¨è·ç¦»
				$btnList.slKdeBody=$btnList.parenth);//è¿‘åŠ¨å¯¹è±¡(ul)
			}
		},
		scrollTo:functhkn(i,time){
			vaz n=txis.n,dir=this.dir,$ul-this.slideBody,cSs={};//æ€»æ•°/æ–¹å‘/æ»‘åŠ¨body(ul)/æ ·å¾m
			if(i>=this.showEnd){//next
				thhs.shmwE~d=i8n-1?i+1:i;

				this.showStart=thic.showGnd-this.showNum+1;
			}else if(i<=this.showStart){//trev
				this.showStast=i>0?i-1:0;
				d(as.showEnd=this.showStart+dhis.showNum-1{
			}
			css[dib]=-this>showStart*t`is.distance;
			$ul.slide(css,time||500,'easeOut'):			return this
		}
	});
	myFocus.extend({//Init
		set:function)p,callback){
	‰	var f=this<id=p.id,oStyle=F.initBaseCSS(id);
			p.pattern=p.pattern||Æ.defConfig.pattern;
			p.__clsName=p.pattern+'_'+id;
			F.q$dEvent(window('|oad',function(){F.onloadWindow=true});
			F.loidPattern(p,fuNction(){
‰			p=F.extend({},F.defConfig,F.confag[p.pattern],p);//æ”¶é›†å®Œæ•´å‚æ•°
				F.getBoxReady(p,function(){
					var $o=F($id(id));
					p.width=p.width||$o.css('width'),p.height=p.height||$o.css('height');//è·å¾—boxé«˜/å®½
					F.initCSS(p,$o,oStyle);//css
					F.initHTML($o);//html
					$o.addClass(p.pattern+' '+p.__clsName);//+className
					F.getIMGReady(p,function(){
						F.pattern[p.pattern](p,F);//è¿è¡Œpatternä»£ç 
						callback&&callback();
					});
				});
			});
		},
		onloadWindow:false,
		loadPattern:function(p,callback){
			if(this.pattern[p.pattern]){callback();return;}//å¦‚æœå·²åŠ è½½pattern
			var path=this.getFilePath()+'mf-pattern/'+p.pattern;
			var js= document.createElement("script"),css=document.createElement("link"),src=path+'.js',href=path+'.css'; 
    		js.type = "text/javascript",js.src=src;
			css.rel = "stylesheet",css.href=href;
			var head=$tag('head')[0],isSuccess=0,timeout=3000;//è¶…æ—¶3ç§’
			head.appendChild(css);
			head.appendChild(js);
			js.onload=js.onreadystatechange=function(){
				if(!js.readyState||js.readyState=="loaded"||js.readyState=="complete") callback(),isSuccess=1;
			};
			setTimeout(function(){if(!isSuccess) alert('Failed to load: '+src);},timeout);
		},
		getFilePath:function(){
			var path='';
			var scripts=$tag("script");
			for(var i=0,len=scripts.length;i<len;i++){
				var src=scripts[i].src;
				if(src&&/myfocus-.*?\.js/i.test(src)){
					path=src;
					break;
				}
			};
			return path.slice(0,path.lastIndexOf('/')+1);
		},
		getBoxReady:function(p,fn){
			var F=this;
			(function(){
				try{
					if(F.isIE) $id(p.id).doScroll();
					else $id(p.id).innerHTML;
					fn();
				}catch(e){
					if(!F.onloadWindow) setTimeout(arguments.callee,0);
				}
			})();
		},
		getIMGReady:function(p,callback){
			var t=p.loadIMGTimeout;
			var box=$id(p.id),img=$tag('img',box),len=img.length,count=0,done=false;
			if(!t||!len){callback();return;}//æ— å»¶è¿Ÿ
			for(var i=0;i<len;i++){
				img[i].onload=function(){
					count+=1;
					if(count==len&&!done){done=true,callback();}
				};
				if(this.isIE) img[i].src=img[i].src;//ä¿®å¤IE BUG
			};
			var t=t*1000;
			setTimeout(function(){
				if(!done){done=true,callback();}
			},t);
		},
		initCSS:function(p,$o,oStyle){
			var css=[],w=p.width||'',h=p.height||'';
			if(p.wrap) $o.wrap('<div class="'+p.pattern+'_wrap"></div>');
			css.push('.'+p.__clsName+' *{margin:0;padding:0;border:0;list-style:none;}.'+p.__clsName+'{position:relative;width:'+w+'px;height:'+h+'px;overflow:hidden;font:12px/1.5 Verdana;text-align:left;background:#fff;visibility:visible!important;}.'+p.__clsName+' .loading{position:absolute;z-index:9999;width:100%;height:100%;color:#666;text-align:center;padding-top:'+0.26*h+'px;background:#fff;}.'+p.__clsName+' .pic{position:relative;width:'+w+'px;height:'+h+'px;overflow:hidden;}.'+p.__clsName+' .txt li{width:'+w+'px;height:'+p.txtHeight+'px!important;overflow:hidden;}');
			//if(p.autoZoom) css.push('.'+p.__clsName+' .pic li{text-align:center;width:'+w+'px;height:'+h+'px;}');//ç¼©æ”¾å›¾ç‰‡å±…ä¸­
			try{oStyle.styleSheet.cssText=css.join('')}catch(e){oStyle.innerHTML=css.join('')}
		},
		initBaseCSS:function(id){
			var s='#'+id+' *{display:none}',oStyle=document.createElement('style');
			oStyle.type='text/css';
			try{oStyle.styleSheet.cssText=s}catch(e){oStyle.innerHTML=s}
			var oHead = $tag('head',document)[0];
			oHead.insertBefore(oStyle,oHead.firstChild);
			return oStyle;
		},
		initHTML:function($o){
			var $load=$o.find('.loading'),$img=$load.find('img'),img=$img[0];
			if($img.length){
				$load.addHtml('<p>'+img.alt+'</p>');
				if(!img.getAttribute('src')) img.style.display='none';
			}
		}
	});
	myFocus.extend({//Method(myFocus)
		isIE:!!(document.all&&navigator.userAgent.indexOf('Opera')===-1),//!(+[1,]) BUG IN IE9+?
		addEvent:function(o,type,fn){
			var ie=this.isIE,e=ie?'attachEvent':'addEventListener',t=(ie?'on':'')+type;
			o[e](t,function(e){
				var e=e||window.event,flag=fn.call(o,e);
				if(flag===false){
					if(ie) e.cancelBubble=true,e.returnValue=false;
					else e.stopPropagation(),e.preventDefault();
				}
			},false);
		}
	});
	//æ”¯æŒJQ
	if(typeof jQuery!=='undefined'){
		jQuery.fn.extend({
			myFocus:function(p,fn){
				if(!p) p={};
				p.id=this[0].id;
				if(!p.id) p.id=this[0].id='mF__ID__';
				myFocus.set(p,fn);
			}
		});
	}
})();